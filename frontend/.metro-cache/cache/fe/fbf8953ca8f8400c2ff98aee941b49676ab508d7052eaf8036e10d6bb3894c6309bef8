{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"zustand/middleware","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":34},"end":{"line":2,"column":64,"index":98}}],"key":"YMP0j6stqbYl0MJAKxYubYnfTz0=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":69,"index":168}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../config","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":169},"end":{"line":4,"column":31,"index":200}}],"key":"pHqFJJBAh3HI9ZCkK8fFRwPv3x0=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";function t(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(_e,'__esModule',{value:!0}),Object.defineProperty(_e,\"useWorkoutStore\",{enumerable:!0,get:function(){return c}}),Object.defineProperty(_e,\"getTodayStatus\",{enumerable:!0,get:function(){return l}}),Object.defineProperty(_e,\"isTrainingDay\",{enumerable:!0,get:function(){return y}}),Object.defineProperty(_e,\"adjustMacrosByDay\",{enumerable:!0,get:function(){return f}});var e=r(d[0]),o=r(d[1]),s=t(r(d[2])),n=t(r(d[3]));const u=()=>(new Date).toISOString().split('T')[0],c=(0,e.create)()((0,o.persist)((t,e)=>({todayStatus:null,adjustedMacros:null,history:[],isLoading:!1,error:null,fetchTodayStatus:async e=>{t({isLoading:!0,error:null});try{const o=u(),s=await fetch(`${n.default.backendUrl}/api/workout/status/${e}?date=${o}`);if(!s.ok)throw new Error('Erro ao buscar status do treino');const c=await s.json();t({todayStatus:{date:c.date,trained:c.trained,completedAt:c.completed_at,isScheduledTrainingDay:c.is_scheduled_training_day,isTrainingDay:c.is_training_day,dietType:c.diet_type,calorieMultiplier:c.calorie_multiplier,carbMultiplier:c.carb_multiplier},isLoading:!1})}catch(e){t({error:e instanceof Error?e.message:'Erro desconhecido',isLoading:!1})}},finishWorkout:async(o,s)=>{t({isLoading:!0,error:null});try{const c=await fetch(`${n.default.backendUrl}/api/workout/finish/${o}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date:s||u()})});if(!c.ok){const t=await c.json();throw new Error(t.detail||'Erro ao marcar treino')}const l=await c.json();return t({todayStatus:{...e().todayStatus,trained:!0,completedAt:l.completed_at,isTrainingDay:!0,dietType:'training',calorieMultiplier:1.05,carbMultiplier:1.15},isLoading:!1}),await e().fetchAdjustedMacros(o),!0}catch(e){return t({error:e instanceof Error?e.message:'Erro desconhecido',isLoading:!1}),!1}},fetchAdjustedMacros:async(e,o)=>{try{const s=o||u(),c=await fetch(`${n.default.backendUrl}/api/workout/adjusted-macros/${e}?date=${s}`);if(!c.ok)return;const l=await c.json();t({adjustedMacros:{baseCalories:l.base_calories,adjustedCalories:l.adjusted_calories,baseProtein:l.base_protein,adjustedProtein:l.adjusted_protein,baseCarbs:l.base_carbs,adjustedCarbs:l.adjusted_carbs,baseFat:l.base_fat,adjustedFat:l.adjusted_fat,dietType:l.diet_type,isTrainingDay:l.trained,multiplierInfo:l.multiplier_info}})}catch(t){console.log('Could not fetch adjusted macros:',t)}},fetchHistory:async(e,o=30)=>{try{const s=await fetch(`${n.default.backendUrl}/api/workout/history/${e}?days=${o}`);if(!s.ok)throw new Error('Erro ao buscar hist\\xf3rico');const u=await s.json();t({history:u.history.map(t=>({date:t.date,trained:t.trained,completedAt:t.completed_at}))})}catch(t){console.log('Could not fetch workout history:',t)}},clearError:()=>t({error:null}),reset:()=>t({todayStatus:null,adjustedMacros:null,history:[],isLoading:!1,error:null})}),{name:'workout-storage',storage:(0,o.createJSONStorage)(()=>s.default),partialize:t=>({todayStatus:t.todayStatus,history:t.history})})),l=()=>c.getState().todayStatus,y=()=>{const t=c.getState().todayStatus;return t?.trained||t?.isScheduledTrainingDay||!1},f=(t,e,o,s,n)=>{const u=n,c=u?1.05:.95,l=u?1.15:.8;return{baseCalories:t,adjustedCalories:Math.round(t*c),baseProtein:e,adjustedProtein:e,baseCarbs:o,adjustedCarbs:Math.round(o*l),baseFat:s,adjustedFat:s,dietType:u?'training':'rest',isTrainingDay:u,multiplierInfo:u?'+5% calorias, +15% carbs':'-5% calorias, -20% carbs'}}});","lineCount":1,"map":[[1,143,65,0,"Object"],[1,150,65,0,"defineProperty"],[1,165,65,0,"_e"],[1,168,65,0],[1,187,65,0,"enumerable"],[1,199,65,0],[1,201,65,0,"get"],[1,205,65,0],[1,223,65,0,"useWorkoutStore"],[1,224,65,0],[1,228,249,0,"Object"],[1,235,249,0,"defineProperty"],[1,250,249,0,"_e"],[1,253,249,0],[1,271,249,0,"enumerable"],[1,283,249,0],[1,285,249,0,"get"],[1,289,249,0],[1,307,249,0,"getTodayStatus"],[1,308,249,0],[1,312,256,0,"Object"],[1,319,256,0,"defineProperty"],[1,334,256,0,"_e"],[1,337,256,0],[1,354,256,0,"enumerable"],[1,366,256,0],[1,368,256,0,"get"],[1,372,256,0],[1,390,256,0,"isTrainingDay"],[1,391,256,0],[1,395,264,0,"Object"],[1,402,264,0,"defineProperty"],[1,417,264,0,"_e"],[1,420,264,0],[1,441,264,0,"enumerable"],[1,453,264,0],[1,455,264,0,"get"],[1,459,264,0],[1,477,264,0,"adjustMacrosByDay"],[1,478,264,0],[1,482,1,0],[1,486,1,0,"_zustand"],[1,488,1,0,"r"],[1,490,1,0,"d"],[1,492,1,0],[1,496,2,0,"_zustandMiddleware"],[1,498,2,0,"r"],[1,500,2,0,"d"],[1,502,2,0],[1,506,3,0,"AsyncStorage"],[1,508,3,0,"_interopDefault"],[1,510,3,0,"r"],[1,512,3,0,"d"],[1,514,3,0],[1,519,4,0,"config"],[1,521,4,0,"_interopDefault"],[1,523,4,0,"r"],[1,525,4,0,"d"],[1,527,4,0],[1,532,58,0],[1,538,58,6,"getTodayDate"],[1,540,58,21,"getTodayDate"],[1,545,59,14],[1,549,59,18,"Date"],[1,555,60,13,"toISOString"],[1,569,60,27,"split"],[1,575,60,33],[1,580,60,38],[1,583,65,13,"useWorkoutStore"],[1,586,65,31],[1,588,65,31,"create"],[1,590,65,37,"create"],[1,599,65,31],[1,601,66,2],[1,603,66,2,"persist"],[1,605,66,9,"persist"],[1,614,67,4],[1,615,67,5,"set"],[1,617,67,10,"get"],[1,622,67,13],[1,623,69,6,"todayStatus"],[1,635,69,19],[1,640,70,6,"adjustedMacros"],[1,655,70,22],[1,660,71,6,"history"],[1,668,71,15],[1,671,72,6,"isLoading"],[1,682,72,17],[1,684,73,6,"error"],[1,690,73,13],[1,695,76,6,"fetchTodayStatus"],[1,712,76,24,"async"],[1,722,77,8,"set"],[1,724,77,12],[1,725,77,14,"isLoading"],[1,736,77,25],[1,738,77,31,"error"],[1,744,77,38],[1,751,79,8],[1,755,80,10],[1,761,80,16,"today"],[1,763,80,24,"getTodayDate"],[1,767,81,16,"response"],[1,775,81,33,"fetch"],[1,781,82,12],[1,784,82,15,"config"],[1,786,82,21,"default"],[1,794,82,22,"backendUrl"],[1,827,82,55,"userId"],[1,837,82,70,"today"],[1,842,85,10],[1,846,85,15,"response"],[1,848,85,24,"ok"],[1,851,86,12],[1,857,86,18],[1,861,86,22,"Error"],[1,867,86,28],[1,902,89,10],[1,908,89,16,"data"],[1,916,89,29,"response"],[1,918,89,38,"json"],[1,925,91,10,"set"],[1,927,91,14],[1,928,92,12,"todayStatus"],[1,940,92,25],[1,941,93,14,"date"],[1,946,93,20,"data"],[1,948,93,25,"date"],[1,953,94,14,"trained"],[1,961,94,23,"data"],[1,963,94,28,"trained"],[1,971,95,14,"completedAt"],[1,983,95,27,"data"],[1,985,95,32,"completed_at"],[1,998,96,14,"isScheduledTrainingDay"],[1,1021,96,38,"data"],[1,1023,96,43,"is_scheduled_training_day"],[1,1049,97,14,"isTrainingDay"],[1,1063,97,29,"data"],[1,1065,97,34,"is_training_day"],[1,1081,98,14,"dietType"],[1,1090,98,24,"data"],[1,1092,98,29,"diet_type"],[1,1102,99,14,"calorieMultiplier"],[1,1120,99,33,"data"],[1,1122,99,38,"calorie_multiplier"],[1,1141,100,14,"carbMultiplier"],[1,1156,100,30,"data"],[1,1158,100,35,"carb_multiplier"],[1,1175,102,12,"isLoading"],[1,1186,102,23],[1,1189,104,8],[1,1190,104,10],[1,1196,104,17,"error"],[1,1199,105,10,"set"],[1,1201,105,14],[1,1202,106,12,"error"],[1,1208,106,19,"error"],[1,1221,106,36,"Error"],[1,1227,106,44,"error"],[1,1229,106,50,"message"],[1,1237,106,60],[1,1257,107,12,"isLoading"],[1,1268,107,23],[1,1271,109,8],[1,1274,113,6,"finishWorkout"],[1,1288,113,21,"async"],[1,1294,113,28,"userId"],[1,1296,113,44,"date"],[1,1301,114,8,"set"],[1,1303,114,12],[1,1304,114,14,"isLoading"],[1,1315,114,25],[1,1317,114,31,"error"],[1,1323,114,38],[1,1330,116,8],[1,1334,117,10],[1,1340,117,16,"response"],[1,1348,117,33,"fetch"],[1,1354,118,12],[1,1357,118,15,"config"],[1,1359,118,21,"default"],[1,1367,118,22,"backendUrl"],[1,1400,118,55,"userId"],[1,1404,119,12],[1,1405,120,14,"method"],[1,1412,120,22],[1,1419,121,14,"headers"],[1,1427,121,23],[1,1428,122,16],[1,1443,122,32],[1,1463,124,14,"body"],[1,1468,124,20,"JSON"],[1,1473,124,25,"stringify"],[1,1483,124,35],[1,1484,124,37,"date"],[1,1489,124,43,"date"],[1,1492,124,51,"getTodayDate"],[1,1500,128,10],[1,1504,128,15,"response"],[1,1506,128,24,"ok"],[1,1509,128,28],[1,1510,129,12],[1,1516,129,18,"errorData"],[1,1524,129,36,"response"],[1,1526,129,45,"json"],[1,1533,130,12],[1,1539,130,18],[1,1543,130,22,"Error"],[1,1549,130,28,"errorData"],[1,1551,130,38,"detail"],[1,1559,130,48],[1,1583,131,10],[1,1584,133,10],[1,1590,133,16,"data"],[1,1598,133,29,"response"],[1,1600,133,38,"json"],[1,1607,152,10],[1,1614,136,10,"set"],[1,1616,136,14],[1,1617,137,12,"todayStatus"],[1,1629,137,25],[1,1633,138,17,"get"],[1,1637,138,23,"todayStatus"],[1,1649,139,14,"trained"],[1,1658,139,23],[1,1660,140,14,"completedAt"],[1,1672,140,27,"data"],[1,1674,140,32,"completed_at"],[1,1687,141,14,"isTrainingDay"],[1,1702,141,29],[1,1704,142,14,"dietType"],[1,1713,142,24],[1,1724,143,14,"calorieMultiplier"],[1,1742,143,33],[1,1747,144,14,"carbMultiplier"],[1,1762,144,30],[1,1768,146,12,"isLoading"],[1,1779,146,23],[1,1789,150,16,"get"],[1,1793,150,22,"fetchAdjustedMacros"],[1,1813,150,42,"userId"],[1,1817,152,17],[1,1818,153,8],[1,1819,153,10],[1,1825,153,17,"error"],[1,1828,158,10],[1,1835,154,10,"set"],[1,1837,154,14],[1,1838,155,12,"error"],[1,1844,155,19,"error"],[1,1857,155,36,"Error"],[1,1863,155,44,"error"],[1,1865,155,50,"message"],[1,1873,155,60],[1,1893,156,12,"isLoading"],[1,1904,156,23],[1,1909,158,17],[1,1910,159,8],[1,1913,163,6,"fetchAdjustedMacros"],[1,1933,163,27,"async"],[1,1939,163,34,"userId"],[1,1941,163,50,"date"],[1,1946,164,8],[1,1950,165,10],[1,1956,165,16,"targetDate"],[1,1958,165,29,"date"],[1,1961,165,37,"getTodayDate"],[1,1965,166,16,"response"],[1,1973,166,33,"fetch"],[1,1979,167,12],[1,1982,167,15,"config"],[1,1984,167,21,"default"],[1,1992,167,22,"backendUrl"],[1,2034,167,64,"userId"],[1,2044,167,79,"targetDate"],[1,2049,170,10],[1,2053,170,15,"response"],[1,2055,170,24,"ok"],[1,2058,172,12],[1,2065,175,10],[1,2071,175,16,"data"],[1,2079,175,29,"response"],[1,2081,175,38,"json"],[1,2088,177,10,"set"],[1,2090,177,14],[1,2091,178,12,"adjustedMacros"],[1,2106,178,28],[1,2107,179,14,"baseCalories"],[1,2120,179,28,"data"],[1,2122,179,33,"base_calories"],[1,2136,180,14,"adjustedCalories"],[1,2153,180,32,"data"],[1,2155,180,37,"adjusted_calories"],[1,2173,181,14,"baseProtein"],[1,2185,181,27,"data"],[1,2187,181,32,"base_protein"],[1,2200,182,14,"adjustedProtein"],[1,2216,182,31,"data"],[1,2218,182,36,"adjusted_protein"],[1,2235,183,14,"baseCarbs"],[1,2245,183,25,"data"],[1,2247,183,30,"base_carbs"],[1,2258,184,14,"adjustedCarbs"],[1,2272,184,29,"data"],[1,2274,184,34,"adjusted_carbs"],[1,2289,185,14,"baseFat"],[1,2297,185,23,"data"],[1,2299,185,28,"base_fat"],[1,2308,186,14,"adjustedFat"],[1,2320,186,27,"data"],[1,2322,186,32,"adjusted_fat"],[1,2335,187,14,"dietType"],[1,2344,187,24,"data"],[1,2346,187,29,"diet_type"],[1,2356,188,14,"isTrainingDay"],[1,2370,188,29,"data"],[1,2372,188,34,"trained"],[1,2380,189,14,"multiplierInfo"],[1,2395,189,30,"data"],[1,2397,189,35,"multiplier_info"],[1,2415,192,8],[1,2416,192,10],[1,2422,192,17,"error"],[1,2425,194,10,"console"],[1,2433,194,18,"log"],[1,2437,194,22],[1,2472,194,58,"error"],[1,2474,195,8],[1,2477,199,6,"fetchHistory"],[1,2490,199,20,"async"],[1,2496,199,27,"userId"],[1,2498,199,43,"days"],[1,2500,199,58],[1,2506,200,8],[1,2510,201,10],[1,2516,201,16,"response"],[1,2524,201,33,"fetch"],[1,2530,202,12],[1,2533,202,15,"config"],[1,2535,202,21,"default"],[1,2543,202,22,"backendUrl"],[1,2577,202,56,"userId"],[1,2587,202,71,"days"],[1,2592,205,10],[1,2596,205,15,"response"],[1,2598,205,24,"ok"],[1,2601,206,12],[1,2607,206,18],[1,2611,206,22,"Error"],[1,2617,206,28],[1,2648,209,10],[1,2654,209,16,"data"],[1,2662,209,29,"response"],[1,2664,209,38,"json"],[1,2671,211,10,"set"],[1,2673,211,14],[1,2674,212,12,"history"],[1,2682,212,21,"data"],[1,2684,212,26,"history"],[1,2692,212,34,"map"],[1,2696,212,39,"h"],[1,2700,212,45],[1,2701,213,14,"date"],[1,2706,213,20,"h"],[1,2708,213,22,"date"],[1,2713,214,14,"trained"],[1,2721,214,23,"h"],[1,2723,214,25,"trained"],[1,2731,215,14,"completedAt"],[1,2743,215,27,"h"],[1,2745,215,29,"completed_at"],[1,2762,218,8],[1,2763,218,10],[1,2769,218,17,"error"],[1,2772,219,10,"console"],[1,2780,219,18,"log"],[1,2784,219,22],[1,2819,219,58,"error"],[1,2821,220,8],[1,2824,223,6,"clearError"],[1,2835,223,18,"clearError"],[1,2839,223,24,"set"],[1,2841,223,28],[1,2842,223,30,"error"],[1,2848,223,37],[1,2855,225,6,"reset"],[1,2861,225,13,"reset"],[1,2865,225,19,"set"],[1,2867,225,23],[1,2868,226,8,"todayStatus"],[1,2880,226,21],[1,2885,227,8,"adjustedMacros"],[1,2900,227,24],[1,2905,228,8,"history"],[1,2913,228,17],[1,2916,229,8,"isLoading"],[1,2927,229,19],[1,2929,230,8,"error"],[1,2935,230,15],[1,2944,233,4],[1,2945,234,6,"name"],[1,2950,234,12],[1,2968,235,6,"storage"],[1,2977,235,15],[1,2979,235,15,"createJSONStorage"],[1,2981,235,32,"createJSONStorage"],[1,3000,235,33],[1,3004,235,39,"AsyncStorage"],[1,3006,235,51,"default"],[1,3015,236,6,"partialize"],[1,3026,236,19,"state"],[1,3030,236,24],[1,3031,237,8,"todayStatus"],[1,3043,237,21,"state"],[1,3045,237,27,"todayStatus"],[1,3057,238,8,"history"],[1,3065,238,17,"state"],[1,3067,238,23,"history"],[1,3080,249,13,"getTodayStatus"],[1,3082,249,30,"getTodayStatus"],[1,3086,250,9,"useWorkoutStore"],[1,3088,250,25,"getState"],[1,3099,250,36,"todayStatus"],[1,3111,256,13,"isTrainingDay"],[1,3113,256,29,"isTrainingDay"],[1,3118,257,2],[1,3124,257,8,"status"],[1,3126,257,17,"useWorkoutStore"],[1,3128,257,33,"getState"],[1,3139,257,44,"todayStatus"],[1,3151,258,2],[1,3158,258,9,"status"],[1,3161,258,17,"trained"],[1,3170,258,28,"status"],[1,3173,258,36,"isScheduledTrainingDay"],[1,3198,258,62],[1,3201,264,13,"adjustMacrosByDay"],[1,3203,264,33,"adjustMacrosByDay"],[1,3204,265,2,"baseCalories"],[1,3206,266,2,"baseProtein"],[1,3208,267,2,"baseCarbs"],[1,3210,268,2,"baseFat"],[1,3212,269,2,"trained"],[1,3217,271,2],[1,3223,271,8,"isTraining"],[1,3225,271,21,"trained"],[1,3227,273,8,"calorieMultiplier"],[1,3229,273,28,"isTraining"],[1,3231,273,41],[1,3236,273,48],[1,3240,274,8,"carbMultiplier"],[1,3242,274,25,"isTraining"],[1,3244,274,38],[1,3249,274,45],[1,3252,276,2],[1,3258,276,9],[1,3259,277,4,"baseCalories"],[1,3274,278,4,"adjustedCalories"],[1,3291,278,22,"Math"],[1,3296,278,27,"round"],[1,3302,278,33,"baseCalories"],[1,3304,278,48,"calorieMultiplier"],[1,3307,279,4,"baseProtein"],[1,3321,280,4,"adjustedProtein"],[1,3337,280,21,"baseProtein"],[1,3339,281,4,"baseCarbs"],[1,3351,282,4,"adjustedCarbs"],[1,3365,282,19,"Math"],[1,3370,282,24,"round"],[1,3376,282,30,"baseCarbs"],[1,3378,282,42,"carbMultiplier"],[1,3381,283,4,"baseFat"],[1,3391,284,4,"adjustedFat"],[1,3403,284,17,"baseFat"],[1,3405,285,4,"dietType"],[1,3414,285,14,"isTraining"],[1,3416,285,27],[1,3427,285,40],[1,3434,286,4,"isTrainingDay"],[1,3448,286,19,"isTraining"],[1,3450,287,4,"multiplierInfo"],[1,3465,287,20,"isTraining"],[1,3467,288,8],[1,3494,289,8],[1,3522,291,2],[1,3525]],"functionMap":{"names":["<global>","getTodayDate","persist$argument_0","fetchTodayStatus","finishWorkout","fetchAdjustedMacros","fetchHistory","data.history.map$argument_0","clearError","reset","createJSONStorage$argument_0","persist$argument_1.partialize","getTodayStatus","isTrainingDay","adjustMacrosByDay"],"mappings":"AAA;qBCyD;CDG;IEM;wBCS;ODkC;qBEG;OF+C;2BGG;OHiC;oBIG;sCCa;cDI;OJK;kBME,0BN;aOE;QPM;MFC;iCUG,kBV;kBWC;QXG;8BYU;CZE;6BaK;CbG;iCcK;Cd2B"},"hasCjsExports":false},"type":"js/module"}]}